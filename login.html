<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - IoT Security System</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>
    <div class="container mt-5">
        <h2 class="text-center">Login</h2>
        <form role="form" onsubmit="login(event)">
            <div class="form-group">
                <label for="email">Email address:</label>
                <input type="email" class="form-control" id="email" placeholder="Enter email">
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" class="form-control" id="password" placeholder="Enter password">
            </div>
            <button type="submit" class="btn btn-primary">Login</button>
        </form>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDMcZaKWpDpXRNdsVamv1bBOmKVVxkQ8_I",
            authDomain: "hhethongchongtrom.firebaseapp.com",
            databaseURL: "https://hhethongchongtrom-default-rtdb.firebaseio.com",
            projectId: "hhethongchongtrom",
            storageBucket: "hhethongchongtrom.firebasestorage.app",
            messagingSenderId: "1084517627549",
            appId: "1:1084517627549:web:77538af7e6961c0af60674",
            measurementId: "G-3XG1Y9GRVF"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
    </script>
    <script>
        function login(event) {
            event.preventDefault();
    
            // Lấy email và mật khẩu từ các trường input
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
    
            // Xác thực người dùng với Firebase Authentication
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Đăng nhập thành công
                    const user = userCredential.user;
                    console.log("Đăng nhập thành công:", user);
    
                    // Chuyển hướng người dùng đến trang chủ hoặc trang khác
                    window.location.href = "index.html";
                })
                .catch((error) => {
                    // Đăng nhập thất bại
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    console.error("Lỗi đăng nhập:", errorCode, errorMessage);
                    alert("Sai email hoặc mật khẩu. Vui lòng thử lại.");
                });
        }
    </script>
</body>

</html>